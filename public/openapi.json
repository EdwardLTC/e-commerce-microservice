{
  "openapi": "3.0.0",
  "info": {
    "title": "e-commerce API Gateway - Auto-generated OpenAPI",
    "version": "1.0.0",
    "description": "Auto-generated OpenAPI spec for HTTP endpoints found in the nest-api-gateway-auth project. Some response schemas are inferred from DTOs and controller code. See docs/openapi.README.md for assumptions."
  },
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "Local development server"
    }
  ],
  "tags": [
    { "name": "Auth", "description": "Authentication endpoints" },
    { "name": "Products", "description": "Product management endpoints" },
    { "name": "Users", "description": "User endpoints (no HTTP handlers found)" }
  ],
  "paths": {
    "/auth/login": {
      "post": {
        "tags": ["Auth"],
        "summary": "Login",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/LoginDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful login",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AuthResponse" }
              }
            }
          },
          "400": { "description": "Bad Request", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } },
          "401": { "description": "Unauthorized", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } }
        }
      }
    },
    "/auth/register": {
      "post": {
        "tags": ["Auth"],
        "summary": "Register new account",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": { "schema": { "$ref": "#/components/schemas/RegisterDto" } }
          }
        },
        "responses": {
          "201": { "description": "Account created", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } } },
          "400": { "description": "Bad Request", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } }
        }
      }
    },
    "/auth/logout": {
      "post": {
        "tags": ["Auth"],
        "summary": "Logout current session",
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "Logged out",
            "content": { "application/json": { "schema": { "type": "object", "properties": { "message": { "type": "string" } } } } }
          },
          "401": { "description": "Unauthorized", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } }
        }
      }
    },
    "/auth/change-password": {
      "post": {
        "tags": ["Auth"],
        "summary": "Change password for authenticated user",
        "security": [{ "bearerAuth": [] }],
        "requestBody": { "required": true, "content": { "application/json": { "schema": { "$ref": "#/components/schemas/ChangePasswordDto" } } } },
        "responses": {
          "200": {
            "description": "Password changed",
            "content": { "application/json": { "schema": { "type": "object", "properties": { "message": { "type": "string" } } } } }
          },
          "400": { "description": "Bad Request", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } },
          "401": { "description": "Unauthorized", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } }
        }
      }
    },
    "/products": {
      "get": {
        "tags": ["Products"],
        "summary": "List products (paginated)",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "schema": { "type": "integer", "minimum": 0 },
            "required": false,
            "description": "Number of products to skip for pagination"
          },
          {
            "name": "take",
            "in": "query",
            "schema": { "type": "integer", "minimum": 1 },
            "required": false,
            "description": "Number of products to take for pagination"
          }
        ],
        "responses": {
          "200": {
            "description": "List of products",
            "content": { "application/json": { "schema": { "type": "array", "items": { "$ref": "#/components/schemas/Product" } } } }
          },
          "401": { "description": "Unauthorized", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } }
        }
      },
      "post": {
        "tags": ["Products"],
        "summary": "Create a product",
        "security": [{ "bearerAuth": [] }],
        "requestBody": { "required": true, "content": { "application/json": { "schema": { "$ref": "#/components/schemas/CreateProductRequest" } } } },
        "responses": {
          "201": { "description": "Product created", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Product" } } } },
          "400": { "description": "Bad Request", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } },
          "401": { "description": "Unauthorized", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } }
        }
      }
    },
    "/products/{id}": {
      "get": {
        "tags": ["Products"],
        "summary": "Get product by id",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string", "format": "uuid" } }],
        "responses": {
          "200": { "description": "Product detail", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Product" } } } },
          "401": { "description": "Unauthorized", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } },
          "404": { "description": "Not Found", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } }
        }
      }
    },
    "/products/{id}/option-types": {
      "post": {
        "tags": ["Products"],
        "summary": "Create option type for a product",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string", "format": "uuid" } }],
        "requestBody": {
          "required": true,
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/CreateProductOptionTypeRequest" } } }
        },
        "responses": {
          "201": {
            "description": "Option type created",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/OptionType" } } }
          },
          "401": { "description": "Unauthorized", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } }
        }
      },
      "get": {
        "tags": ["Products"],
        "summary": "List option types for a product",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string", "format": "uuid" } }],
        "responses": {
          "200": {
            "description": "Option types",
            "content": { "application/json": { "schema": { "type": "array", "items": { "$ref": "#/components/schemas/OptionType" } } } }
          },
          "401": { "description": "Unauthorized", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } }
        }
      }
    },
    "/products/option-types/{optionTypeId}/option-values": {
      "post": {
        "tags": ["Products"],
        "summary": "Create an option value",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "optionTypeId", "in": "path", "required": true, "schema": { "type": "string", "format": "uuid" } }],
        "requestBody": {
          "required": true,
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/CreateProductOptionValueRequest" } } }
        },
        "responses": {
          "201": {
            "description": "Option value created",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/OptionValue" } } }
          },
          "401": { "description": "Unauthorized", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } }
        }
      },
      "get": {
        "tags": ["Products"],
        "summary": "List option values for an option type",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "optionTypeId", "in": "path", "required": true, "schema": { "type": "string", "format": "uuid" } }],
        "responses": {
          "200": {
            "description": "Option values",
            "content": { "application/json": { "schema": { "type": "array", "items": { "$ref": "#/components/schemas/OptionValue" } } } }
          },
          "401": { "description": "Unauthorized", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } }
        }
      }
    },
    "/products/{id}/variants": {
      "post": {
        "tags": ["Products"],
        "summary": "Create a product variant",
        "security": [{ "bearerAuth": [] }],
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string", "format": "uuid" } }],
        "requestBody": {
          "required": true,
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/CreateProductVariantRequest" } } }
        },
        "responses": {
          "201": { "description": "Variant created", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Variant" } } } },
          "401": { "description": "Unauthorized", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } } }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": { "type": "http", "scheme": "bearer", "bearerFormat": "JWT" }
    },
    "schemas": {
      "Error": {
        "type": "object",
        "properties": { "statusCode": { "type": "integer" }, "message": { "type": "string" }, "error": { "type": "string" } }
      },
      "LoginDto": {
        "type": "object",
        "required": ["email", "password"],
        "properties": {
          "email": { "type": "string", "format": "email", "example": "lethanhcong@gmail.com" },
          "password": { "type": "string", "example": "123456789" }
        }
      },
      "RegisterDto": {
        "type": "object",
        "required": ["email", "password", "name"],
        "properties": {
          "email": { "type": "string", "format": "email", "example": "lethanhcong@gmail.com" },
          "password": { "type": "string", "example": "123456789" },
          "name": { "type": "string" }
        }
      },
      "ChangePasswordDto": {
        "type": "object",
        "required": ["oldPassword", "newPassword"],
        "properties": { "oldPassword": { "type": "string" }, "newPassword": { "type": "string" } }
      },
      "AuthResponse": {
        "type": "object",
        "properties": { "accessToken": { "type": "string" }, "tokenType": { "type": "string", "example": "Bearer" } }
      },
      "User": {
        "type": "object",
        "properties": { "id": { "type": "string", "format": "uuid" }, "email": { "type": "string", "format": "email" }, "name": { "type": "string" } }
      },
      "GetProductsRequest": {
        "type": "object",
        "properties": { "skip": { "type": "integer", "minimum": 0, "example": 0 }, "take": { "type": "integer", "minimum": 1, "example": 10 } }
      },
      "CreateProductRequest": {
        "type": "object",
        "required": ["name", "price", "description", "brand", "stock"],
        "properties": {
          "name": { "type": "string", "example": "High Quality Product" },
          "price": { "type": "number", "example": 100.0 },
          "description": { "type": "string", "example": "A high-quality product that meets all your needs." },
          "brand": { "type": "string", "example": "BrandName" },
          "stock": { "type": "integer", "example": 100 },
          "mediaUrls": { "type": "array", "items": { "type": "string", "format": "uri" } }
        }
      },
      "CreateProductOptionTypeRequest": {
        "type": "object",
        "required": ["name"],
        "properties": { "name": { "type": "string", "example": "Color" }, "displayOrder": { "type": "integer", "example": 1 } }
      },
      "CreateProductOptionValueRequest": {
        "type": "object",
        "required": ["value"],
        "properties": {
          "value": { "type": "string", "example": "Red" },
          "mediaUrl": { "type": "string", "format": "uri" },
          "displayOrder": { "type": "integer", "example": 1 }
        }
      },
      "CreateProductVariantRequest": {
        "type": "object",
        "required": ["sku", "price", "stock", "options"],
        "properties": {
          "sku": { "type": "string", "example": "SKU12345" },
          "price": { "type": "number", "example": 9999.99 },
          "stock": { "type": "integer", "example": 50 },
          "mediaUrl": { "type": "string", "format": "uri" },
          "options": { "type": "array", "items": { "type": "string" } }
        }
      },
      "Product": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "name": { "type": "string" },
          "price": { "type": "number" },
          "description": { "type": "string" },
          "brand": { "type": "string" },
          "stock": { "type": "integer" },
          "mediaUrls": { "type": "array", "items": { "type": "string", "format": "uri" } }
        }
      },
      "OptionType": {
        "type": "object",
        "properties": { "id": { "type": "string", "format": "uuid" }, "name": { "type": "string" }, "displayOrder": { "type": "integer" } }
      },
      "OptionValue": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "value": { "type": "string" },
          "mediaUrl": { "type": "string", "format": "uri" },
          "displayOrder": { "type": "integer" }
        }
      },
      "Variant": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "sku": { "type": "string" },
          "price": { "type": "number" },
          "stock": { "type": "integer" },
          "mediaUrl": { "type": "string", "format": "uri" },
          "options": { "type": "array", "items": { "type": "string" } }
        }
      }
    }
  }
}
